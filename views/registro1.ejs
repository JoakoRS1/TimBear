<!DOCTYPE html>
<html>
    <head>
        <title>Tim-Bear</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
        <link href="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.2/knockout-min.js"></script>
        <script type="text/javascript"  src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script>
        <script type="text/javascript"  src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.16.0/jquery.validate.min.js"></script>
        <script type="text/javascript"   src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/3.2.6/jquery.validate.unobtrusive.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script> 
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js" integrity="sha512-0QbL0ph8Tc8g5bLhfVzSqxe9GERORsKhIn1IrpxDAgUsbBGz/V7iSav2zzW325XGd1OMLdL4UiqRJj702IeqnQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="http://www.jqueryscript.net/demo/jQuery-Plugin-For-Horizontal-Floating-Social-Share-Bar/js/jquery.floating-share.js" type="text/javascript"></script>
    </head>
    <body class="">
        <%- include('menu')  %>
        
        <!-- MultiStep Form -->
<div class="row">
    <div class="col">
        <center><h1>¡Crea una nueva cuenta!</h1></center>
        <br>
        <!-- progressbar -->
        <ul id="progressbar" role="progressbar">
            <li class="active">Paso 1</li>
            <li>Paso 2</li>
            <li>Paso 3</li>
            <li>Paso 4</li>
            <li>Paso 5</li>
        </ul>

};
<form id="msform1" class="msform container" method="post" action="/registro1">
            <!-- fieldsets -->
            <fieldset>
                <h2 class="fs-title">Paso 1</h2>
                <center><div class="mb-3 mt-3 col-8" >
                    <input type="text" placeholder="Nombre" class="form-control" name='nombreU' required>
                </div> 
                </center>
                <center>
                <div class="mb-3 col-8">
                    <input type="text" placeholder="Apellido" class="form-control" name='apellidoU' required>
                </div></center>
                <input type="button" name="submit1" class="next action-button" value="Siguiente">
            </fieldset>
        </form>

        <form id="msform2" class="msform container" method="post" action="/registro1">
            <fieldset>
                <h2 class="fs-title">Paso 2</h2>
                <center>
                    <div class="mb-3 mt-3 col-6" >
                    <label id="etiqueta" class="form-label">DNI:</label>
                    <input type="text" placeholder="Dni" class="form-control" name='dniU' required>
                    </div>
                </center>
                <center>
                    <div class="mb-3 col-6">
                        <label for="formFile" class="form-label">Adjuntar foto</label>
                        <input class="form-control" type="file" id="fotoU">
                    </div>
                </center>

                <input type="button" name="previous" class="previous action-button-previous" value="Anterior"/>
                <input type="button" name="submit2" class="next action-button" value="Siguiente"/>
            </fieldset>
        </form>

        <form id="msform3" class="msform container" method="post" action="/registro1">
            <fieldset>
                <h2 class="fs-title">Paso 3</h2>
                <center><div class="mb-3 mt-3 col-6" >
                    <input type="text" placeholder="Correo electrónico" class="form-control" name='correoU' required>
                </div>
            </center>
            <center>
                <div class="mb-3 col-6">

                    <input type="password" placeholder="Contraseña" class="form-control" name='contraU' required>
                </div></center>
                <center>
                    <div class="mb-3 col-6">
                        <input type="password" placeholder="Confirmar contraseña" class="form-control" name='confirmarcontraU' required>
                    </div></center>
                    <center>
                        <div class="mb-3 col-6">
                            <input type="text" placeholder="Número telefónico" class="form-control" name='numeroU' required>
                        </div></center>

                <input type="button" name="previous" class="previous action-button-previous" value="Anterior"/>
                <input type="button" name="submit3" class="next action-button" value="Siguiente"/>
            </fieldset>
        </form>

        <form id="msform4" class="msform container" method="post" action="/registro1">
            <fieldset>
                <h2 class="fs-title">Paso 4</h2>
                <center><div class="mb-3 mt-3 col-6" >
                    <label id="etiqueta" class="form-label">Dirección:</label>
                    <textarea class="form-control" id="direcU" rows="3" required></textarea>
                </div>
            </center>
            <center>
                <div class="mb-3 col-6">
                    <label id="etiqueta" class="form-label">Departamento:</label>
                    <select class="form-select" aria-label="Default select example" name="Departamento" id="Departamento">
                        <option selected>Seleccione un departamento</option>
                        <option value="1">One</option>
                        <option value="2">Two</option>
                        <option value="3">Three</option>
                      </select>
                </div></center>
                <center>
                    <div class="mb-3 col-6">
                        <label id="etiqueta" class="form-label">Provincia:</label>
                        <select class="form-select" name="Provincia" aria-label="Default select example" id="Provincia">
                            <option selected>Seleccione una provincia</option>
                            <option value="1">One</option>
                            <option value="2">Two</option>
                            <option value="3">Three</option>
                          </select>
                    </div></center>
                    <center>
                        <div class="mb-3 col-6">
                            <label id="etiqueta" class="form-label">Distrito:</label>
                            <select class="form-select" name="Distrito" aria-label="Default select example" id="Distrito">
                                <option selected>Seleccione un distrito</option>
                                <option value="1">One</option>
                                <option value="2">Two</option>
                                <option value="3">Three</option>
                              </select>
                        </div></center>

                <input type="button" name="previous" class="previous action-button-previous" value="Anterior"/>
                <input type="button" name="submit4" class="next action-button" value="Siguiente"/>
            </fieldset>
        </form>

        <form id="msform5" class="msform container" method="post" action="/registro1">
            <fieldset>
                <h2 class="fs-title">Paso 5</h2>
                <center>
                    <div>
                        ¿Es una persona políticamente expuesta? (PEP)
                    </div>
                        <div class="form-check form-check-inline" name="Checks">
                            Si<input class="form-check-input" type="checkbox" name="PEP" value="1" id="estadoPEPU1">
                            No<input class="form-check-input" type="checkbox" name="PEP" value="0" id="estadoPEPU2">
                        </div>
                        
                    
                  <center>

                <input type="button" name="previous" class="previous action-button-previous" value="Anterior"/>
                <input type="submit" name="submit5" value="Registrar"/>
                  </div>
                   
            </fieldset>
        </form>
    </div>
</div>
<!-- /.MultiStep Form -->
        
    <script>

    //jQuery time
    var current_fs, next_fs, previous_fs; //fieldsets
    var left, opacity, scale; //fieldset properties which we will animate
    var animating; //flag to prevent quick multi-click glitches

    var numStep = 1;
    var errStep = false;

    $(".submit").click(function(){
        var statusStep = false;
        switch(numStep) {
            case 1:
                $.ajax({
                    beforeSend: function(){
                        $('#msform1 .loader').show();
                    }
                    , cache: false
                    , type: "POST"
                    , dataType: "json"
                    , url: "include/InsertAjaxAccount.inc.php"
                    , data: $("#msform1").serialize()
                    , success: function(res){
                        if(res.err){
                            errStep = true;
                            console.error('Custom error: ' + res.errMsg);
                        }
                        else{
                            console.info('OK');
                            errStep = false;
                        }
                        $('#msform1 .loader').hide();
                    }
                    , error:function(){
                        errStep = true;
                        console.error('System error');
                        $('#msform1 .loader').hide();
                    }
                });

                break;
            case 2:
                $.ajax({
                    beforeSend: function(){
                        $('#msform2 .loader').show();
                    }
                    , cache: false
                    , type: "POST"
                    , dataType: "json"
                    , url: "include/InsertAjaxSocialNetwork.inc.php"
                    , data: $("#msform2").serialize()
                    , success: function(res){
                        if(res.err){
                            errStep = true;
                            console.error('Custom error: ' + res.errMsg);
                        }
                        else{
                            console.info('OK');
                            errStep = false;
                        }
                        $('#msform1 .loader').hide();
                    }
                    , error:function(){
                        errStep = true;
                        console.error('System error');
                        $('#msform1 .loader').hide();
                    }
                });

                break;
            default:
                console.error('step not recognized: ' + numStep);
        }
        return false;
    });

    $(".next").click(function(){
        console.log('Error: ' + errStep)
        if(animating || errStep) return false;
        animating = true;

        numStep++;

        current_fs = $(this).parent();
        next_fs = $(this).parent().parent().next().children();

        //activate next step on progressbar using the index of next_fs
        $("#progressbar li").eq($("fieldset").index(next_fs)).addClass("active");

        //show the next fieldset
        next_fs.show(); 
        //hide the current fieldset with style
        current_fs.animate({opacity: 0}, {
            step: function(now, mx) {
                //as the opacity of current_fs reduces to 0 - stored in "now"
                //1. scale current_fs down to 80%
                scale = 1 - (1 - now) * 0.2;
                //2. bring next_fs from the right(50%)
                left = (now * 50)+"%";
                //3. increase opacity of next_fs to 1 as it moves in
                opacity = 1 - now;
                current_fs.css({'transform': 'scale('+scale+')'});
                next_fs.css({'left': left, 'opacity': opacity});
            }, 
            duration: 800, 
            complete: function(){
                current_fs.hide();
                animating = false;
            }, 
            //this comes from the custom easing plugin
            easing: 'easeInOutBack'
        });
        console.log(numStep);
    });

    $(".previous").click(function(){
        console.log('Error: ' + errStep)
        if(animating || errStep) return false;
        animating = true;

        numStep--;

        current_fs = $(this).parent();
        previous_fs = $(this).parent().parent().prev().children();

        //de-activate current step on progressbar
        $("#progressbar li").eq($("fieldset").index(current_fs)).removeClass("active");

        //show the previous fieldset
        previous_fs.show(); 
        //hide the current fieldset with style
        current_fs.animate({opacity: 0}, {
            step: function(now, mx) {
                //as the opacity of current_fs reduces to 0 - stored in "now"
                //1. scale previous_fs from 80% to 100%
                scale = 0.8 + (1 - now) * 0.2;
                //2. take current_fs to the right(50%) - from 0%
                left = ((1-now) * 50)+"%";
                //3. increase opacity of previous_fs to 1 as it moves in
                opacity = 1 - now;
                current_fs.css({'left': left});
                previous_fs.css({'transform': 'scale('+scale+')', 'opacity': opacity});
            }, 
            duration: 800, 
            complete: function(){
                current_fs.hide();
                animating = false;
            }, 
            //this comes from the custom easing plugin
            easing: 'easeInOutBack'
        });

        console.log(numStep);
    });



    </script>
    <%- include('footer')%>

    </body>
</html>